# 重要な決定事項

**最終更新**: 2025年08月16日

## アーキテクチャ決定

### 2025年08月14日 - v2アーキテクチャへの完全移行
- **決定**: クリーンアーキテクチャ（5層構造）への移行
- **理由**: 
  - 保守性の向上
  - テスタビリティの改善
  - 依存関係の明確化
- **影響**: 全コマンド（49個）の再実装

### 2025年08月14日 - Result型統一
- **決定**: 全サービス層でAppError型に統一
- **理由**: 
  - エラーハンドリングの一貫性
  - フロントエンドへの統一的なエラー返却
- **実装**: From実装による自動変換

## 開発方針

### 2025年08月16日 - タスク管理システムの分割構造化
- **決定**: current_tasks.mdを複数ファイルに分割
- **理由**: 
  - ClaudeCodeの部分更新による不整合を防止
  - 履歴の自動保持
  - 検索性の向上
- **構造**: priority/status/completed/metrics/contextに分類

### 2025年08月16日 - E2Eテストの削除
- **決定**: E2Eテスト機能を削除し、ユニットテスト・統合テストに集中
- **理由**: 
  - Tauri v2がE2Eテストに正式対応していない
  - WebDriver経由でTauri APIが利用できない根本的制約
- **代替**: ユニットテストと統合テストでカバレッジ70%以上を目指す

## 技術選定

### テストツール
- **単体テスト**: Vitest (TypeScript), tokio::test (Rust)
- **統合テスト**: Vitest + Tauri API モック (予定)
- **モック**: mockall v0.13 (Rust), Zustand モック (TypeScript)
- **カバレッジ目標**: 最低70%

### 開発環境
- **Windows環境**: Docker経由でのテスト実行推奨
- **理由**: DLLエラー回避

## 保留事項

### MVP完成後の改善
- ローカルファーストなデータベース実装
- 予約投稿のバックエンド実装
- 検索機能の拡張

### 技術的負債の解消
- #[allow(dead_code)]の削減（97箇所）
- 未使用APIエンドポイント11件の削除
- TypeScript any型の削減（64箇所）