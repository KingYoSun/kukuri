# 2025年09月15日 完了タスク

## GossipManager 廃止（テスト移行完了 → 本体削除）

- Iroh版integrationテストへ旧`integration_tests.rs`のシナリオを移行
  - 2ノード送受信（ENV有効時）
  - 3ノードブロードキャスト（A→B,C）（ENV有効時）
  - 双方向安定性の簡易検証（ENV有効時）
  - `tests/iroh_integration_tests.rs`に追加、`ENABLE_P2P_INTEGRATION=1`で有効化
- 旧`integration_tests.rs`を削除（GossipManager依存の完全排除）
- `modules/p2p/gossip_manager.rs`を削除
- `modules/p2p/mod.rs` から `gossip_manager` を除去
- `state.rs` から `P2PState::manager` フィールドを削除し、参照を整理
- 追加・変更後に `cargo test` を実行し、148 passed / 0 failed を確認

### 変更ファイル
- `kukuri-tauri/src-tauri/src/modules/p2p/tests/iroh_integration_tests.rs`（テスト追加）
- `kukuri-tauri/src-tauri/src/modules/p2p/tests/integration_tests.rs`（削除）
- `kukuri-tauri/src-tauri/src/modules/p2p/gossip_manager.rs`（削除）
- `kukuri-tauri/src-tauri/src/modules/p2p/mod.rs`（露出削除）
- `kukuri-tauri/src-tauri/src/state.rs`（フィールド削除）
- `docs/01_project/activeContext/deprecation/gossip_manager_deprecation.md`（チェック更新）
- `docs/01_project/activeContext/tasks/status/in_progress.md`（ステータス更新）

### 確認手順
```bash
cd kukuri-tauri/src-tauri
cargo test
# 実ネットワークを伴う統合テストを有効化する場合
ENABLE_P2P_INTEGRATION=1 cargo test --tests modules::p2p::tests::iroh_integration_tests
```

