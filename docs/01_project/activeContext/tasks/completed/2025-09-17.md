# 2025年09月17日 完了タスク

## cn-cli Docker接続テストの環境変数伝播修正
- CLI Dockerエントリポイントを exec ラッパへ刷新し、`KUKURI_SECRET_KEY` などの環境変数を確実に CLI へ引き渡すように更新（`kukuri-community-node/crates/cn-cli/scripts/docker-entrypoint.sh`）
- Docker Compose 構成と統合テストを `tests/` 配下に整理し、環境ファイルの生成・削除をテスト内で完結させるよう修正（`kukuri-community-node/crates/cn-cli/tests/docker-compose.test.yml`, `kukuri-community-node/crates/cn-cli/tests/docker_connectivity.rs`）
- タスク進捗ログを更新（`docs/01_project/activeContext/tasks/status/in_progress.md`）

### テスト/確認
```bash
cd kukuri-community-node
cargo test
```

## Windows向けDocker接続テストラッパーの整備
- PowerShell スクリプト `kukuri-community-node/crates/cn-cli/scripts/test-docker.ps1` を追加し、Windows環境から docker-compose ベースの接続確認をワンコマンドで実行できるようにした（envファイル生成／クリーンアップを自動化）。
- テスト側のログに `node_a_id` を出力し、手動実行時の参照値を把握しやすくした（`kukuri-community-node/crates/cn-cli/tests/docker_connectivity.rs`）。
- コンテナ間での接続先共有用に `CONNECT_PEER` を環境ファイルへ明示的に出力し、PowerShellラッパーでも同値を生成するよう調整（`kukuri-community-node/crates/cn-cli/tests/docker_connectivity.rs`, `kukuri-community-node/crates/cn-cli/scripts/test-docker.ps1`）。
- タスク進捗ログを更新し、着手事項の完了を反映（`docs/01_project/activeContext/tasks/status/in_progress.md`）。

### テスト/確認
```bash
cd kukuri-community-node
cargo test
```
