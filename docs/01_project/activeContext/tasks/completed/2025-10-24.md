# 2025年10月24日 完了タスク

## Phase 5 EventGateway Sprint 1 - EG-S1-01
- `application::ports::event_gateway.rs` を新設し、Nostr 由来のイベント操作を集約する `EventGateway` trait を定義。`handle_incoming_event` / `publish_topic_post` / `send_reaction` など Phase 5 で設計したインターフェースを反映した。
- ドメイン層に `domain::{entities,value_objects}::event_gateway` を追加し、`DomainEvent`・`EventTag`・`ProfileMetadata`・`PublicKey`・`ReactionValue`・`TopicContent` を型付け。`DomainEvent` と既存 `Event` の相互変換ヘルパを実装し、タグ配列を正規化した。
- 設計ドキュメント `phase5_event_gateway_design.md` に実装メモを追記し、trait との差分が無いことを確認。`cargo fmt` / `cargo check` を通過。

## Phase 5 Offline Adapter Stage 0 - OFF-S0-01
- `domain::value_objects::offline` に `OfflineActionId`・`OfflinePayload`・`SyncStatus`・`SyncQueueStatus`・`CacheKey`・`CacheType`・`OptimisticUpdateId` など 12 種の値オブジェクトを追加し、文字列や整数で表現されていた識別子／状態を型で表現。
- `domain::entities::offline` に `OfflineActionRecord`・`SyncQueueItem`・`CacheMetadataRecord`・`OptimisticUpdateRecord`・`SyncStatusRecord`・`CacheStatusSnapshot` などを定義。`DateTime<Utc>` と `OfflinePayload` を用いてタイムスタンプと JSON ペイロードを型安全に扱うスキーマを整備した。
- `phase5_offline_adapter_plan.md` にスキーマ決定内容を反映し、Stage 1 以降で Adapter に切り替える際の参照点を明文化。`cargo fmt` / `cargo check` を実行し、新規モジュールがビルド可能であることを確認。
