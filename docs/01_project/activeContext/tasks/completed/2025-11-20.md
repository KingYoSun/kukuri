## Offline Sync Nightly拡張とエラーハンドリング指標（Task 27）

- [x] `useSyncManager` に `pendingActionSummary` を追加し、`SyncStatusIndicator` でカテゴリ別の未同期アクション表示と `errorHandler.info('SyncStatus.*')` ログ（`queue_snapshot` / `pending_actions_snapshot` / `retry_metrics_snapshot`）を記録できるようにした。`useSyncStatusTelemetry` フックにより UI 表示と Nightly ログを同期。
- [x] `offlineSyncTelemetry.test.tsx` を新設し、Topic/Post/Follow/DM ごとの Vitest シナリオを `--offline-category` で切り替え可能に変更。`scripts/test-docker.{ps1,sh}` / `.github/workflows/nightly.yml` も更新し、`sync-status-indicator-{topic,post,follow,dm}` artefact を収集。
- [x] Runbook / phase5 artefact / nightly progress docs を更新し、`nightly.partial-feature-usage.md` へ新しいトリアージ手順を追記。`tasks/status/in_progress.md` から当該タスクを削除し、本ファイルへ完了ログを追加。

### 主な変更ファイル

- `kukuri-tauri/src/hooks/useSyncManager.ts`
- `kukuri-tauri/src/components/SyncStatusIndicator.tsx`
- `kukuri-tauri/src/tests/unit/components/SyncStatusIndicator.test.tsx`
- `kukuri-tauri/src/tests/unit/hooks/useSyncManager.test.tsx`
- `kukuri-tauri/src/tests/unit/scenarios/offlineSyncTelemetry.test.tsx`
- `scripts/test-docker.ps1`
- `scripts/test-docker.sh`
- `.github/workflows/nightly.yml`
- `docs/03_implementation/p2p_mainline_runbook.md`
- `docs/01_project/activeContext/artefacts/phase5_user_flow_summary.md`
- `docs/01_project/activeContext/artefacts/phase5_user_flow_inventory.md`
- `docs/01_project/activeContext/artefacts/phase5_ci_path_audit.md`
- `docs/01_project/progressReports/nightly.partial-feature-usage.md`
- `docs/01_project/progressReports/nightly.index.md`
- `docs/01_project/activeContext/tasks/status/in_progress.md`

### 実行コマンド

- `powershell.exe -NoLogo -Command ./scripts/test-docker.ps1 ts -Scenario offline-sync`
- `powershell.exe -NoLogo -Command ./scripts/test-docker.ps1 ts -Scenario offline-sync -OfflineCategory topic -NoBuild`
- `powershell.exe -NoLogo -Command ./scripts/test-docker.ps1 ts -Scenario offline-sync -OfflineCategory dm -NoBuild`

## GitHub Actions Format Check 修正

- [x] `gh run view` / `gh act --job format-check` で `kukuri-tauri` の Prettier 未整形ファイル（`SyncStatusIndicator.tsx` ほか 3 件）による失敗を再現し、影響範囲をログ化。
- [x] `pnpm --dir kukuri-tauri exec prettier --write` で該当 3 ファイルをフォーマット、TypeScript 側の差分のみであることを確認。
- [x] `gh act --workflows .github/workflows/test.yml --job format-check` と `--job native-test-linux` を再実行し、両ジョブが成功すること、後者のログ（`test-results/native-test-linux.log`）にテスト成功記録が残ることを確認。

### 主な変更ファイル

- `docs/01_project/activeContext/tasks/status/in_progress.md`
- `kukuri-tauri/src/components/SyncStatusIndicator.tsx`
- `kukuri-tauri/src/hooks/useSyncManager.ts`
- `kukuri-tauri/src/tests/unit/scenarios/offlineSyncTelemetry.test.tsx`

### 実行コマンド

- `pnpm --dir kukuri-tauri exec prettier --write src/components/SyncStatusIndicator.tsx src/hooks/useSyncManager.ts src/tests/unit/scenarios/offlineSyncTelemetry.test.tsx`
- `gh act --workflows .github/workflows/test.yml --job format-check --env NPM_CONFIG_PREFIX=/tmp/npm-global`
- `gh act --workflows .github/workflows/test.yml --job native-test-linux --env NPM_CONFIG_PREFIX=/tmp/npm-global`
