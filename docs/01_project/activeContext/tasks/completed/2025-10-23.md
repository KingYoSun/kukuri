# 2025年10月23日 完了タスク

## Phase 5 TypeScript テスト再編・DI 統合検証
- `src/tests/unit`／`integration` 配下へ既存の TypeScript テストを全面移行し、旧 `src/__tests__` / `src/test` ディレクトリを撤去。`package.json`・`tsconfig.json`・`vitest.config.ts` の参照パスを新構成に合わせて更新。
- 重複していたコンポーネント／ストアテストを統合。`PostCard` テストではブースト・ブックマーク・未同期バッジなど Phase 5 で追加された振る舞いを再度カバーしつつ、`topicStore` と `authStore` の結合ケースを一つに整理。
- `src/tests/integration/di/store_di.integration.test.ts` を新設し、`useP2PStore.initialize` と `offlineSyncService.triggerSync` の依存注入フローを検証する DI 統合テストを追加。
- `src/tests/unit/lib/nip10.contract.test.ts` のテストデータ読み込みをリポジトリ直下の `testdata/nip10_contract_cases.json` 参照に修正し、TypeScript/Rust 双方の契約テストで共通データを保持。
- `docs/01_project/activeContext/artefacts/phase5_test_inventory.md` を更新し、Hooks／Stores／Integration の不足項目を解消した構成と新規 DI テストを記録。`tasks/status/in_progress.md` から当該タスクをクローズ。
- 検証: `pnpm test` を実行し、新ディレクトリ構成で 63 ファイル・679 件のテストが全て成功することを確認。

