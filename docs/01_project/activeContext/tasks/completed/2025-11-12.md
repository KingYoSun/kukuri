# 2025年11月12日 完了タスク

最終更新日: 2025年11月12日

## Nightly Docker シナリオ（ts-test-entrypoint）実行権限修正

- [x] `gh run list --workflow nightly.yml` / `gh run view 19269754542 --job 55094644156` で Nightly `profile-avatar-sync` / `trending-feed` ジョブが `scripts/docker/ts-test-entrypoint.sh` 実行時に `permission denied` で失敗していることを確認し、`gh api repos/KingYoSun/kukuri/actions/jobs/55094644156/logs` から OCI runtime エラーを取得。
- [x] `git update-index --chmod=+x scripts/docker/ts-test-entrypoint.sh` を適用し、Linux runner で `ts-test` サービスの entrypoint に実行権限が付与されるよう修正。
- [x] `gh act -W .github/workflows/nightly.yml -j profile-avatar-sync -P ubuntu-latest=catthehacker/ubuntu:act-latest` で Docker シナリオをローカル再現し、コンテナ起動〜Vitest 実行まで完了すること（`act` では artefact ステップのみログ検出できず失敗する制限がある）を確認。
- [x] `cd kukuri-tauri/src-tauri && cargo test` および `cd kukuri-cli && cargo test` で Rust 側回帰が無いことを検証。

### 実行コマンド

- `gh run list --workflow nightly.yml --limit 5`
- `gh run view 19269754542 --job 55094644156`
- `gh api repos/KingYoSun/kukuri/actions/jobs/55094644156/logs > tmp/gha-logs/profile-avatar-sync.log`
- `gh api repos/KingYoSun/kukuri/actions/jobs/55094644159/logs > tmp/gha-logs/trending-feed.log`
- `gh act -W .github/workflows/nightly.yml -j profile-avatar-sync -P ubuntu-latest=catthehacker/ubuntu:act-latest`
- `cd kukuri-tauri/src-tauri && cargo test`
- `cd kukuri-cli && cargo test`
