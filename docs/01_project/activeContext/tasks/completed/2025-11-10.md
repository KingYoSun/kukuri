# 2025年11月10日 完了タスク

最終更新日: 2025年11月10日

## GitHub Actions ワークフロー安定化（Native/Docker両対応）

- [x] `UpdateSyncStatusRequest` から未定義フィールド（`doc_version` / `payload_bytes`）参照を除去し、`tests/common/performance/offline.rs` で `cache_metadata` スキーマに `doc_version` / `blob_hash` / `payload_bytes` を追加。`offline::cache_metadata_upsert_and_cleanup` は `expiry_time` を直接減算する方式に変えて実行時刻依存を排除し、`SyncStatusIndicator.test.tsx` は `Doc/Blob` タブを `userEvent` で操作するよう修正。
- [x] `pnpm vitest run src/tests/unit/components/SyncStatusIndicator.test.tsx` / `cargo test --workspace --all-features`（`kukuri-tauri/src-tauri`）/`cargo test`（`cn-cli`）で型・単体・統合テストを再実行し、`gh act push -j native-test-linux -W .github/workflows/test.yml`（ログ: `tmp/logs/gh_act_native_20251110_fix7.log`）で `Native Test (Linux)` の成功を再現。あわせて `docker compose -f docker-compose.test.yml run --rm test-runner /app/run-tests.sh`（`tmp/logs/docker_test_runner_20251110.log`）と `docker compose -f docker-compose.test.yml run --rm rust-test`（`tmp/logs/docker_rust_test_runner_20251110.log`）で `Docker Test Suite` の手動再実行を完了。

### 実行コマンド

- `pnpm vitest run src/tests/unit/components/SyncStatusIndicator.test.tsx`
- `cargo test --workspace --all-features`
- `cargo test`（`cn-cli`）
- `gh act push -j native-test-linux -W .github/workflows/test.yml`
- `docker compose -f docker-compose.test.yml run --rm test-runner /app/run-tests.sh`
- `docker compose -f docker-compose.test.yml run --rm rust-test`
