# 2026年02月13日 完了タスク

## Community Nodes / `cn-relay` `/healthz` ready 依存判定拡張

- [x] `cn-relay` `/healthz` を DB到達性のみの判定から拡張し、relay 依存（gossip 参加状態・topic購読同期状態）の劣化を `degraded` / `unavailable` で返すように実装
- [x] `cn-relay` `/healthz` 契約テストを拡張し、`gossip未参加 -> unavailable` と `topic同期ドリフト -> degraded` を固定
- [x] `community_nodes_roadmap.md` の該当未実装項目を `[x]` に更新
- [x] 進捗レポート `docs/01_project/progressReports/2026-02-13_cn_relay_healthz_ready_dependency_status.md` を作成

## 検証

- [x] `./scripts/test-docker.ps1 rust`
  - ログ: `tmp/logs/test-docker-rust-relay-healthz-20260213-050522.log`
- [x] `docker run --rm --network host -v ${PWD}:/workspace ... kukuri-test-runner bash -lc "source /usr/local/cargo/env && cd /workspace/kukuri-community-node && cargo test -p cn-relay --all-features -- --nocapture"`（成功）
  - ログ: `tmp/logs/cn-relay-healthz-contract-mounted-20260213-051222.log`
- [x] `gh act --workflows .github/workflows/test.yml --job format-check --env NPM_CONFIG_PREFIX=/tmp/npm-global`（成功）
  - ログ: `tmp/logs/gh-act-format-check-relay-healthz-20260213-051312.log`
- [x] `gh act --workflows .github/workflows/test.yml --job native-test-linux --env NPM_CONFIG_PREFIX=/tmp/npm-global`（成功）
  - ログ: `tmp/logs/gh-act-native-test-linux-relay-healthz-20260213-051312.log`
- [x] `gh act --workflows .github/workflows/test.yml --job community-node-tests --env NPM_CONFIG_PREFIX=/tmp/npm-global`（成功）
  - ログ: `tmp/logs/gh-act-community-node-tests-relay-healthz-20260213-051312.log`
